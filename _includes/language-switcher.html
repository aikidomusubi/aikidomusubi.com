{% if page.layout != 'index' %}
  {% assign posts=site.posts | where:"i18n-ref", page.i18n-ref | sort: 'lang' %}
  {% if posts.size == 0 %}
    {% assign posts=site.pages | where:"i18n-ref", page.i18n-ref | sort: 'lang' %}
  {% endif %}
  {% if posts.size > 1 %}
    <div id="languageSwitcher" class="lang-options">
      <ul>
        {% for post in posts %}
          <li>
            <a href="{{ site.url }}{{ post.url }}" class="{{ post.lang }}">
              {% if post.lang == 'ca' %}
                Català
              {% endif %}
              {% if post.lang == 'en' %}
                English
              {% endif %}
              {% if post.lang == 'es' %}
                Español
              {% endif %}
              {% if post.lang == 'ja' %}
                日本語
              {% endif %}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
{% endif %}
